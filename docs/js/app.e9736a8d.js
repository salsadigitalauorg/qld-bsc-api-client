(function(t){function e(e){for(var s,l,n=e[0],o=e[1],c=e[2],d=0,p=[];d<n.length;d++)l=n[d],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&p.push(i[l][0]),i[l]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],s=!0,n=1;n<r.length;n++){var o=r[n];0!==i[o]&&(s=!1)}s&&(a.splice(e--,1),t=l(l.s=r[0]))}return t}var s={},i={app:0},a=[];function l(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=t,l.c=s,l.d=function(t,e,r){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(r,s,function(e){return t[e]}.bind(null,s));return r},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],o=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=o;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},2454:function(t,e,r){},"2f05":function(t,e,r){"use strict";var s=r("2454"),i=r.n(s);i.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"app",attrs:{id:"find-a-provider"}},["listing"===t.state?r("div",["loading"===t.listingState?r("div",[r("p",{staticClass:"find-a-provider__message"},[t._v("Loading...")])]):t._e(),"display"===t.listingState?[r("form-filter",{attrs:{"provider-list":t.filterProviderList},on:{updateFilter:t.filterChange}}),r("results",{attrs:{list:t.paginatedView},on:{selected:t.selectedResult}}),t.totalSteps>1?r("pager",{attrs:{initial:t.pager.currentStep,perstep:t.pager.itemsPerStep,total:t.totalSteps},on:{change:t.pagerChange}}):t._e()]:t._e(),"error"===t.listingState?r("error",{on:{retry:t.load}}):t._e()],2):t._e(),"full"===t.state?r("div",[r("full-view",{attrs:{selected:t.selected.register},on:{back:t.backClick}})],1):t._e()])},a=[],l=(r("4160"),r("a630"),r("c975"),r("d81d"),r("fb6a"),r("d3b7"),r("6062"),r("3ca3"),r("159b"),r("ddb0"),r("96cf"),r("1da1")),n=r("bc3a"),o=r.n(n),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"filter",on:{submit:t.updateFilters}},[r("div",{staticClass:"filter__first-line"},[r("div",{staticClass:"filter__field filter__keyword"},[r("label",{staticClass:"filter__label filter__keyword-label",attrs:{for:"filter__keyword"}},[t._v("Search for a provider")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.keywords,expression:"filter.keywords"}],staticClass:"filter__input filter__keyword-input",attrs:{id:"filter__keyword",type:"text",placeholder:"Search for a provider"},domProps:{value:t.filter.keywords},on:{keyup:t.updateFilters,input:function(e){e.target.composing||t.$set(t.filter,"keywords",e.target.value)}}})]),r("div",{staticClass:"filter__field filter__provider"},[r("label",{staticClass:"filter__label filter__provider-label",attrs:{for:"filter__provider"}},[t._v("Filter by type of provider")]),r("div",{staticClass:"filter__input-select-wrapper"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.provider,expression:"filter.provider"}],staticClass:"filter__provider-input",attrs:{id:"filter__provider"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"provider",e.target.multiple?r:r[0])},t.updateFilters]}},[r("option",{attrs:{value:""}},[t._v("All providers")]),t._l(t.providerList,(function(e,s){return r("option",{key:s,domProps:{value:e.value}},[t._v(t._s(e.label))])}))],2)])])]),r("div",{staticClass:"filter__sort"},[r("label",{staticClass:"filter__label filter__sort-label",attrs:{for:"filter__sort"}},[t._v("Sort")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.sort,expression:"filter.sort"}],staticClass:"filter__sort-input",attrs:{id:"filter__sort"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.filter,"sort",e.target.multiple?r:r[0])},t.updateFilters]}},[r("option",{attrs:{value:"asc"}},[t._v("Sort (A-Z)")]),r("option",{attrs:{value:"desc"}},[t._v("Sort (Z-A)")])])])])},u=[],d=(r("4de4"),{name:"FormFilter",components:{},props:{providerList:Array},data:function(){return{filter:{keywords:"",provider:"",sort:"asc"}}},methods:{updateFilters:function(){this.$emit("updateFilter",this.filter)}}}),p=d,f=(r("8f77"),r("2877")),_=Object(f["a"])(p,c,u,!1,null,null,null),v=_.exports,h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h2",{staticClass:"result__title"},[t._v("Results")]),t.list.length>0?r("ul",{staticClass:"result"},t._l(t.list,(function(e,s){return r("li",{key:s,staticClass:"result__list-item"},[r("div",{staticClass:"result__items"},[r("div",{staticClass:"result__item result__item-1"},[e.logo?r("img",{staticClass:"result__item-logo",attrs:{src:e.logo,alt:""}}):t._e()]),r("div",{staticClass:"result__item result__item-2"},[r("h3",{staticClass:"result__item-title"},[r("button",{staticClass:"result__item-title-button",on:{click:function(r){return t.selected(e)}}},[t._v(t._s(e.title))])])]),r("div",{staticClass:"result__item result__item-3"},[r("span",{staticClass:"result__item-participant",class:{"result__item-participant--orange":"orange"===e.participantLabelColor,"result__item-participant--purple":"purple"===e.participantLabelColor}},[t._v(t._s(e.participantType))])]),r("div",{staticClass:"result__item result__item-4"},[r("span",{staticClass:"result__item-status"},[t._v(t._s(e.status))])]),r("div",{staticClass:"result__item result__item-5"},[r("span",{staticClass:"result__item-accredit-label"},[t._v("Accreditation number")]),r("br"),r("span",{staticClass:"result__item-accredit-value"},[t._v(t._s(e.reference))])])])])})),0):r("div",{staticClass:"result__no-items"},[t._v("Sorry we could not find any results")])])},g=[],m={name:"Results",components:{},data:function(){return{}},props:{list:Array},methods:{selected:function(t){this.$emit("selected",t)}}},b=m,y=(r("ebf2"),Object(f["a"])(b,h,g,!1,null,null,null)),C=y.exports,w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"pager"},[t.current>1?r("button",{staticClass:"pager__prev",on:{click:t.prevPage}},[r("span",[t._v("Previous page")])]):t._e(),r("ul",{staticClass:"pager__page-list"},t._l(t.range,(function(e,s){return r("li",{key:s,staticClass:"pager__item"},["..."===e?r("span",{staticClass:"pager__item-dots"},[t._v(t._s(e))]):r("button",{staticClass:"pager__item-btn",class:{"pager__item-btn--current":t.current===e},on:{click:function(r){return t.change(e)}}},[r("span",{staticClass:"pager__btn-text"},[t._v(t._s(e))])])])})),0),t.current<t.total?r("button",{staticClass:"pager__next",on:{click:t.nextPage}},[r("span",{staticClass:"pager__btn-text"},[t._v("Next page")])]):t._e()])},k=[],S=(r("a9e3"),{name:"Pager",components:{},props:{initial:Number,perstep:Number,total:Number},data:function(){return{current:this.initial}},methods:{change:function(t){this.$emit("change",t),this.current=t},prevPage:function(){this.change(this.current-1)},nextPage:function(){this.change(this.current+1)}},computed:{range:function(){var t=[];if(this.total>6){var e=this.current,r=this.total;e>2&&t.push(1),e>3&&t.push("..."),e===r&&t.push(e-2),e>1&&t.push(e-1),t.push(e),e+1<r&&t.push(e+1),1===e&&t.push(3),e<r-2&&t.push("..."),e<r&&t.push(r)}else for(var s=1;s<=this.total;s++)t.push(s);return t}},watch:{initial:function(t){this.current=t}}}),P=S,x=(r("dd3c"),Object(f["a"])(P,w,k,!1,null,null,null)),A=x.exports,L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"full-view"},[r("button",{staticClass:"full-view__back",on:{click:t.back}},[t._v("Back")]),t.selected.logoUrl?r("img",{staticClass:"full-view__logo",attrs:{src:t.selected.logoUrl,alt:""}}):t._e(),r("h2",{staticClass:"full-view__title"},[t._v(t._s(t.selected.legalEntityName))]),r("div",{staticClass:"full-view__details"},t._l(t.details,(function(e,s){return r("div",{key:s,staticClass:"full-view__detail"},[r("h3",{staticClass:"full-view__detail-title"},[t._v(t._s(e.title))]),r("p",{staticClass:"full-view__detail-detail",domProps:{innerHTML:t._s(e.detail)}})])})),0),t.selected.brands&&t.selected.brands.length>0?r("div",{staticClass:"full-view__brand-setion"},[r("h3",{staticClass:"full-view__brand-title"},[t._v("Brands")]),r("ul",{staticClass:"full-view__brands"},t._l(t.selected.brands,(function(e,s){return r("li",{key:s,staticClass:"full-view__brands-item"},[r("div",{staticClass:"full-view__brands-wrapper"},[e.logoUrl?r("img",{staticClass:"full-view__brands-image",attrs:{src:e.logoUrl,alt:""}}):t._e(),e.brandName?r("div",{staticClass:"full-view__detail"},[r("h4",{staticClass:"full-view__detail-title"},[t._v("Brand Name")]),r("p",{staticClass:"full-view__detail-detail"},[t._v(t._s(e.brandName))])]):t._e(),e.brandDescription?r("div",{staticClass:"full-view__detail"},[r("h4",{staticClass:"full-view__detail-title"},[t._v("Brand Description")]),r("p",{staticClass:"full-view__detail-detail"},[t._v(t._s(e.brandDescription))])]):t._e(),e.status?r("div",{staticClass:"full-view__detail"},[r("h4",{staticClass:"full-view__detail-title"},[t._v("Status")]),r("p",{staticClass:"full-view__detail-detail"},[t._v(t._s(e.status))])]):t._e(),e.softwareProducts&&e.softwareProducts.length>0?r("div",[r("h4",{staticClass:"full-view__detail-title"},[t._v("Products")]),t._l(e.softwareProducts,(function(e,s){return r("ul",{key:s},[r("li",[r("div",[t._v(t._s(e.softwareProductRef))]),r("div",[t._v(t._s(e.softwareProductName))]),r("div",[t._v(t._s(e.softwareProductStatus))])])])}))],2):t._e()])])})),0)]):t._e()])},N=[],O=(r("99af"),r("a15b"),{name:"Results",props:{selected:Object},computed:{address:function(){var t=[],e=[];return this.selected.serviceAddressStreetAddress1&&e.push(this.selected.serviceAddressStreetAddress1),this.selected.serviceAddressStreetAddress2&&e.push(this.selected.serviceAddressStreetAddress2),e.length>0&&t.push(e.join(" ")),this.selected.serviceAddresState&&t.push(this.selected.serviceAddresState),this.selected.serviceAddressPostcode&&t.push(this.selected.serviceAddressPostcode),this.selected.serviceAddressCountry&&t.push(this.selected.serviceAddressCountry),t.join(", ")},details:function(){var t=this,e=[{field:"lastUpdated",title:"Last updated",type:"text"},{field:"legalEntityRef",title:"Accreditation Number",type:"text"},{field:"status",title:"Accreditation Status",type:"text"},{field:"website",title:"Website",type:"link"},{field:"cdrPolicyUrl",title:"Consumer Data rights",type:"link"},{field:"address",title:"Address for service",type:"text"},{field:"legalEntityName",title:"Legal entity name",type:"text"},{field:"legalEntityRef",title:"Legal entity reference",type:"text"}],r=[];return e.forEach((function(e){var s=t.selected[e.field];if(s){var i="";switch(e.type){case"link":i='<a class="full-view__detail-link" href="'.concat(s,'">').concat(s,"</a>");break;case"text":i=s;break}r.push({title:e.title,detail:i})}})),r}},methods:{back:function(){this.$emit("back")}}}),$=O,j=(r("2f05"),Object(f["a"])($,L,N,!1,null,null,null)),E=j.exports,R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"error"},[r("p",{staticClass:"error__message"},[t._v("An error has occurred trying to get data.")]),r("p",{staticClass:"error__message"},[t._v("You can retry by clicking the button below:")]),r("button",{staticClass:"error__button",on:{click:t.retry}},[t._v("Retry")])])},F=[],T={methods:{retry:function(){this.$emit("retry")}}},U=T,D=(r("7ab1"),Object(f["a"])(U,R,F,!1,null,null,null)),M=D.exports,q={name:"App",components:{FormFilter:v,Results:C,Pager:A,FullView:E,Error:M},data:function(){return{dataset:null,filters:{keywords:null,provider:null,sort:"asc"},filterProviderList:null,pager:{currentStep:1,itemsPerStep:6},state:"listing",listingState:"loading",selected:null}},computed:{processedList:function(){var t=[];if(this.dataset){for(var e=0;e<this.dataset.registerDetails.length;e++){var r=this.dataset.registerDetails[e],s=r.participantType,i=r.legalEntityName||"";t.push({id:r.legalEntityRef,logo:r.logoUrl,title:i,displayName:i,participantType:s,participantLabelColor:"Data Recipient"===s?"orange":"purple",status:r.status,reference:r.legalEntityRef,keywordSearch:i.toUpperCase(),register:r})}t=this.filterList(t),this.sortList(t)}return t},paginatedView:function(){var t=(this.pager.currentStep-1)*this.pager.itemsPerStep,e=t+this.pager.itemsPerStep;return this.processedList.slice(t,e)},totalSteps:function(){return Math.ceil(this.processedList.length/this.pager.itemsPerStep)}},methods:{load:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.listingState="loading",e.next=4,o()("https://api.test.cdr.gov.au/cdr-register/v1/banking/register");case 4:r=e.sent,200===r.status&&r.data?(t.dataset=r.data,s=new Set,t.dataset.registerDetails.forEach((function(t){s.add(t.participantType)})),t.filterProviderList=Array.from(s).map((function(t){return{label:t,value:t}})),t.listingState="display"):t.listingState="error",e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},filterChange:function(t){this.filters.keywords=t.keywords,this.filters.provider=t.provider,this.filters.sort=t.sort,this.pager.currentStep=1},pagerChange:function(t){this.pager.currentStep=t,this.$refs["app"].scrollIntoView({behavior:"smooth"})},selectedResult:function(t){this.$router.push({query:{provider:t.id}})},backClick:function(){this.$router.push({query:{}})},filterList:function(t){var e=this.filters.keywords||this.filters.provider||this.filters.product||this.filters.organisation;if(e){var r=[],s=!!this.filters.keywords&&this.filters.keywords.toUpperCase(),i=!!this.filters.provider&&this.filters.provider;return t.forEach((function(t){var e=!1;s&&t.keywordSearch.indexOf(s)>-1&&(e=!0),i&&t.participantType===i&&(e=!0),e&&r.push(t)})),r}return t},sortList:function(t){return this.filters.sort&&(t="asc"===this.filters.sort?t.sort((function(t,e){return t.displayName.localeCompare(e.displayName)})):t.sort((function(t,e){return e.displayName.localeCompare(t.displayName)}))),t},setState:function(t){if(t.provider){for(var e=null,r=0;r<this.processedList.length;r++){var s=this.processedList[r];if(s.id===t.provider){e=s;break}}e&&(this.state="full",this.selected=e)}else this.state="listing",this.selected=null;this.filters={keywords:null,provider:null,sort:"asc"}}},created:function(){this.load()},mounted:function(){this.setState(this.$route.query)},watch:{$route:function(t){this.setState(t.query)}}},B=q,V=(r("5c0b"),Object(f["a"])(B,i,a,!1,null,null,null)),J=V.exports,Z=r("8c4f");s["a"].config.productionTip=!1,s["a"].use(Z["a"]);var H=new Z["a"]({mode:"history",routes:[]});new s["a"]({router:H,render:function(t){return t(J)}}).$mount("#app")},"5b83":function(t,e,r){},"5c0b":function(t,e,r){"use strict";var s=r("9c0c"),i=r.n(s);i.a},"7ab1":function(t,e,r){"use strict";var s=r("ee0b"),i=r.n(s);i.a},"8f77":function(t,e,r){"use strict";var s=r("eedf"),i=r.n(s);i.a},"9c0c":function(t,e,r){},af34:function(t,e,r){},dd3c:function(t,e,r){"use strict";var s=r("5b83"),i=r.n(s);i.a},ebf2:function(t,e,r){"use strict";var s=r("af34"),i=r.n(s);i.a},ee0b:function(t,e,r){},eedf:function(t,e,r){}});
//# sourceMappingURL=app.e9736a8d.js.map